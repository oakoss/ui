/*
 * Button Component Styles
 * Uses data-variant and data-size attributes for styling
 */

@import './theme.css';
@import './utilities.css';

/* Spinner animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.button-spinner {
  width: 1rem;
  height: 1rem;
  animation: spin 1s linear infinite;
}

.button-spinner-track {
  opacity: 0.25;
}

.button-spinner-head {
  opacity: 0.75;
}

.button-spinner-absolute {
  position: absolute;
}

.button-content-hidden {
  opacity: 0;
}

.react-aria-Button.button {
  position: relative;

  /* SVG icon handling */
  > svg {
    pointer-events: none;
    flex-shrink: 0;
    width: 1rem;
    height: 1rem;
  }

  /* Size: default */
  &[data-size='default'] {
    height: calc(var(--spacing) * 9);
    padding: 0 calc(var(--spacing) * 4);
    font-size: 0.875rem;

    &:has(> svg) {
      padding: 0 calc(var(--spacing) * 3);
    }
  }

  /* Size: sm */
  &[data-size='sm'] {
    height: calc(var(--spacing) * 8);
    padding: 0 calc(var(--spacing) * 3);
    font-size: 0.75rem;
    gap: calc(var(--spacing) * 1.5);
    border-radius: var(--radius-md, 0.375rem);

    &:has(> svg) {
      padding: 0 calc(var(--spacing) * 2.5);
    }

    > svg {
      width: 0.875rem;
      height: 0.875rem;
    }
  }

  /* Size: lg */
  &[data-size='lg'] {
    height: calc(var(--spacing) * 10);
    padding: 0 calc(var(--spacing) * 6);
    font-size: 1rem;
    border-radius: var(--radius-md, 0.375rem);

    &:has(> svg) {
      padding: 0 calc(var(--spacing) * 4);
    }

    > svg {
      width: 1.25rem;
      height: 1.25rem;
    }
  }

  /* Size: icon */
  &[data-size='icon'] {
    width: calc(var(--spacing) * 9);
    height: calc(var(--spacing) * 9);
    padding: 0;
  }

  /* Size: icon-sm */
  &[data-size='icon-sm'] {
    width: calc(var(--spacing) * 8);
    height: calc(var(--spacing) * 8);
    padding: 0;
  }

  /* Size: icon-lg */
  &[data-size='icon-lg'] {
    width: calc(var(--spacing) * 10);
    height: calc(var(--spacing) * 10);
    padding: 0;
  }

  /* Pending state */
  &[data-pending] {
    cursor: default;
    opacity: 0.5;
  }

  /* Variant: default (Primary) */
  &[data-variant='default'] {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: var(--shadow-sm);

    &:where([data-hovered]) {
      background-color: hsl(var(--primary) / 0.9);
    }

    &:where([data-pressed]) {
      background-color: hsl(var(--primary) / 0.9);
    }
  }

  /* Variant: Secondary */
  &[data-variant='secondary'] {
    background-color: hsl(var(--secondary));
    color: hsl(var(--secondary-foreground));
    box-shadow: var(--shadow-sm);

    &:where([data-hovered]) {
      background-color: hsl(var(--secondary) / 0.8);
    }

    &:where([data-pressed]) {
      background-color: hsl(var(--secondary) / 0.8);
    }
  }

  /* Variant: Destructive */
  &[data-variant='destructive'] {
    background-color: hsl(var(--destructive));
    color: hsl(var(--destructive-foreground));
    box-shadow: var(--shadow-sm);

    &:where([data-hovered]) {
      background-color: hsl(var(--destructive) / 0.9);
    }

    &:where([data-pressed]) {
      background-color: hsl(var(--destructive) / 0.9);
    }
  }

  /* Variant: Outline */
  &[data-variant='outline'] {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--input));
    box-shadow: var(--shadow-xs);

    &:where([data-hovered]) {
      background-color: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
    }

    &:where([data-pressed]) {
      background-color: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
    }
  }

  /* Variant: Ghost */
  &[data-variant='ghost'] {
    background-color: transparent;
    color: hsl(var(--foreground));

    &:where([data-hovered]) {
      background-color: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
    }

    &:where([data-pressed]) {
      background-color: hsl(var(--accent));
      color: hsl(var(--accent-foreground));
    }
  }

  /* Variant: Link */
  &[data-variant='link'] {
    background-color: transparent;
    color: hsl(var(--primary));
    text-decoration: underline;
    text-underline-offset: 4px;
    height: auto;
    padding: 0;

    &:where([data-hovered]) {
      text-decoration-thickness: 2px;
    }

    &:where([data-pressed]) {
      transform: none;
    }
  }
}

/* Forced colors mode variant overrides */
@media (forced-colors: active) {
  .react-aria-Button.button {
    &[data-variant='default'],
    &[data-variant='secondary'],
    &[data-variant='destructive'] {
      background-color: ButtonFace;
      color: ButtonText;
      border: 1px solid ButtonBorder;
    }

    &[data-variant='outline'],
    &[data-variant='ghost'] {
      background-color: transparent;
      color: ButtonText;
      border: 1px solid ButtonBorder;
    }

    &[data-variant='link'] {
      color: LinkText;
      border: none;
    }
  }
}
